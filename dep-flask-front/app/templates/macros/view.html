{% macro table(records) %}
	<table class="table table-striped table-hover">
		<thead class="table-info">
			<tr>
			{% for header in records[0] %}
				<td>{{header}}</td>
			{% endfor %}
			</tr>
		</thead>
		<tbody>
		{% for record in records %}
			{% set n = 0 %}
			<tr>
			{% for value in record.values() %}
				{% if value is is_list %}
				{% set n = n + 1 %}
				<td>
					<button class="btn btn-success btn-sm" type="button" data-toggle="collapse" data-target="#a{{records.index(record)+1}}{{n}}" aria-expanded="false" aria-controls="{{records.index(record)+1}}{{n}}">
						Подробнее
					</button>
				</td>
				{% else %}
				<td>{{value}}</td>
				{% endif %}
			{% endfor %}
			</tr>
			{% set n = 0 %}
			{% for value in record.values() %}
				{% if value is is_list %}
				{% set n = n + 1 %}
				<tr>
					<td colspan="{{record|length}}" class="p-0">
						<div class="collapse" id="a{{records.index(record)+1}}{{n}}">
							{{ table(value) }}
						</div>
					</td>
				</tr>
				{% endif %}
			{% endfor %}
		{% endfor %}
		</tbody>	
	</table>
{% endmacro %}
